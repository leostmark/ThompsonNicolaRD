<Activity mc:Ignorable="sads sap sap2010" x:Class="ActivityBuilder" mva:VisualBasic.Settings="{x:Null}" sap2010:WorkflowViewState.IdRef="ActivityBuilder_1"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:eacg="clr-namespace:ESRI.ArcGIS.Client.Geometry;assembly=ESRI.ArcGIS.Client"
 xmlns:eact="clr-namespace:ESRI.ArcGIS.Client.Tasks;assembly=ESRI.ArcGIS.Client"
 xmlns:esri="http://schemas.esri.com/arcgis/client/2009"
 xmlns:ggg="clr-namespace:Geocortex.Gis.Geometries;assembly=Geocortex.Gis"
 xmlns:gwa="clr-namespace:Geocortex.Workflow.Activities;assembly=Geocortex.Workflow.Activities"
 xmlns:gwa1="clr-namespace:Geocortex.Workflow.Activities;assembly=Geocortex.Workflow"
 xmlns:gwta="clr-namespace:Geocortex.Workflow.Tempest.Activities;assembly=Geocortex.Workflow.Tempest"
 xmlns:gwtd="clr-namespace:Geocortex.Workflow.Tempest.Data;assembly=Geocortex.Workflow.Tempest"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities"
 xmlns:mvc="clr-namespace:Microsoft.VisualBasic.CompilerServices;assembly=Microsoft.VisualBasic"
 xmlns:s="clr-namespace:System;assembly=System"
 xmlns:s1="clr-namespace:System;assembly=mscorlib"
 xmlns:s2="clr-namespace:System;assembly=System.Core"
 xmlns:s3="clr-namespace:System;assembly=System.ServiceModel"
 xmlns:s4="clr-namespace:System;assembly=System.Numerics"
 xmlns:s5="clr-namespace:System;assembly=System.Web.Services"
 xmlns:s6="clr-namespace:System;assembly=System.AddIn"
 xmlns:s7="clr-namespace:System;assembly=System.Design"
 xmlns:s8="clr-namespace:System;assembly=System.Drawing.Design"
 xmlns:s9="clr-namespace:System;assembly=System.ComponentModel.Composition"
 xmlns:sa="clr-namespace:System.Activities;assembly=System.Activities"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:sap2010="http://schemas.microsoft.com/netfx/2010/xaml/activities/presentation"
 xmlns:sc="clr-namespace:System.Configuration;assembly=System.Configuration"
 xmlns:sc1="clr-namespace:System.Configuration;assembly=System"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System.Core"
 xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System"
 xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel"
 xmlns:sco="clr-namespace:System.Collections.ObjectModel;assembly=mscorlib"
 xmlns:scs="clr-namespace:System.Collections.Specialized;assembly=System"
 xmlns:sd="clr-namespace:System.Data;assembly=System.Data"
 xmlns:si="clr-namespace:System.IO;assembly=WindowsBase"
 xmlns:si1="clr-namespace:System.IO;assembly=mscorlib"
 xmlns:si2="clr-namespace:System.IO;assembly=System"
 xmlns:si3="clr-namespace:System.IO;assembly=System.Core"
 xmlns:si4="clr-namespace:System.IO;assembly=System.ServiceModel"
 xmlns:sl="clr-namespace:System.Linq;assembly=System.Core"
 xmlns:st="clr-namespace:System.Text;assembly=mscorlib"
 xmlns:sw="clr-namespace:System.Web;assembly=System.Web"
 xmlns:sw1="clr-namespace:System.Web;assembly=System"
 xmlns:sxs="clr-namespace:System.Xml.Serialization;assembly=System.Xml"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <TextExpression.NamespacesForImplementation>
    <sco:Collection x:TypeArguments="x:String">
      <x:String>System.Activities.XamlIntegration</x:String>
      <x:String>System.Activities.Validation</x:String>
      <x:String>System.Activities</x:String>
      <x:String>System.Activities.Statements</x:String>
      <x:String>System.Activities.Expressions</x:String>
      <x:String>System.Windows.Shapes</x:String>
      <x:String>System.Windows.Controls</x:String>
      <x:String>System.Windows.Documents</x:String>
      <x:String>System.Windows.Shell</x:String>
      <x:String>System.Windows.Navigation</x:String>
      <x:String>System.Windows.Data</x:String>
      <x:String>System.Windows</x:String>
      <x:String>System.Windows.Controls.Primitives</x:String>
      <x:String>System.Windows.Media.Animation</x:String>
      <x:String>System.Windows.Input</x:String>
      <x:String>System.Windows.Media</x:String>
      <x:String>System.Diagnostics</x:String>
      <x:String>System.Windows.Media.Effects</x:String>
      <x:String>System.Windows.Media.Imaging</x:String>
      <x:String>System.Windows.Media.Media3D</x:String>
      <x:String>System.Windows.Automation</x:String>
      <x:String>System.Windows.Media.TextFormatting</x:String>
      <x:String>System.Windows.Ink</x:String>
      <x:String>System.Windows.Forms.Integration</x:String>
      <x:String>ESRI.ArcGIS.Client.Geometry</x:String>
      <x:String>ESRI.ArcGIS.Client.Tasks</x:String>
      <x:String>ESRI.ArcGIS.Client</x:String>
      <x:String>ESRI.ArcGIS.Client.Symbols</x:String>
      <x:String>ESRI.ArcGIS.Client.ValueConverters</x:String>
      <x:String>ESRI.ArcGIS.Client.AdvancedSymbology</x:String>
      <x:String>Geocortex.Gis.Geometries</x:String>
      <x:String>Geocortex.Workflow.Activities</x:String>
      <x:String>Geocortex.Workflow.Tempest.Activities</x:String>
      <x:String>Geocortex.Workflow.Tempest.Data</x:String>
      <x:String>Microsoft.VisualBasic.Activities</x:String>
      <x:String>Microsoft.VisualBasic.CompilerServices</x:String>
      <x:String>System</x:String>
      <x:String>System.Activities.Debugger.Symbol</x:String>
      <x:String>System.Configuration</x:String>
      <x:String>System.Collections.Generic</x:String>
      <x:String>System.Collections.Specialized</x:String>
      <x:String>System.Data</x:String>
      <x:String>System.IO</x:String>
      <x:String>System.Linq</x:String>
      <x:String>System.Text</x:String>
      <x:String>System.Web</x:String>
      <x:String>System.Xml.Serialization</x:String>
      <x:String>System.Windows.Markup</x:String>
    </sco:Collection>
  </TextExpression.NamespacesForImplementation>
  <TextExpression.ReferencesForImplementation>
    <sco:Collection x:TypeArguments="AssemblyReference">
      <AssemblyReference>System.Activities</AssemblyReference>
      <AssemblyReference>PresentationFramework</AssemblyReference>
      <AssemblyReference>WindowsBase</AssemblyReference>
      <AssemblyReference>PresentationCore</AssemblyReference>
      <AssemblyReference>WindowsFormsIntegration</AssemblyReference>
      <AssemblyReference>ESRI.ArcGIS.Client</AssemblyReference>
      <AssemblyReference>Geocortex.Gis</AssemblyReference>
      <AssemblyReference>Geocortex.Workflow.Activities</AssemblyReference>
      <AssemblyReference>Geocortex.Workflow</AssemblyReference>
      <AssemblyReference>Geocortex.Workflow.Tempest</AssemblyReference>
      <AssemblyReference>Microsoft.VisualBasic</AssemblyReference>
      <AssemblyReference>System</AssemblyReference>
      <AssemblyReference>mscorlib</AssemblyReference>
      <AssemblyReference>System.Core</AssemblyReference>
      <AssemblyReference>System.ServiceModel</AssemblyReference>
      <AssemblyReference>System.Numerics</AssemblyReference>
      <AssemblyReference>System.Web.Services</AssemblyReference>
      <AssemblyReference>System.AddIn</AssemblyReference>
      <AssemblyReference>System.Design</AssemblyReference>
      <AssemblyReference>System.Drawing.Design</AssemblyReference>
      <AssemblyReference>System.ComponentModel.Composition</AssemblyReference>
      <AssemblyReference>System.Configuration</AssemblyReference>
      <AssemblyReference>System.Data</AssemblyReference>
      <AssemblyReference>System.Web</AssemblyReference>
      <AssemblyReference>System.Xml</AssemblyReference>
      <AssemblyReference>System.Xaml</AssemblyReference>
      <AssemblyReference>System.Reactive.Core</AssemblyReference>
      <AssemblyReference>System.Runtime.WindowsRuntime</AssemblyReference>
    </sco:Collection>
  </TextExpression.ReferencesForImplementation>
  <Sequence DisplayName="Main Seq - TempestToEssentials" sap2010:WorkflowViewState.IdRef="Sequence_14" mva:VisualBasic.Settings="Assembly references and imported namespaces serialized as XML namespaces">
    <Sequence.Variables>
      <Variable x:TypeArguments="x:String" Name="tempestSessionId" />
      <Variable x:TypeArguments="scg2:Dictionary(x:String, scg2:List(x:String))" Name="tempestResults" />
      <Variable x:TypeArguments="scg2:Dictionary(x:String, x:String)" Default="[New Dictionary (Of String, String)]" Name="tempestMappings" />
      <Variable x:TypeArguments="gwtd:TempestSession" Name="tempestSession" />
      <Variable x:TypeArguments="x:String" Name="initializationErrorMessage" />
      <Variable x:TypeArguments="esri:Envelope" Name="zoomEnvelope" />
      <Variable x:TypeArguments="s1:DateTime" Name="lastUpdateTime" />
      <Variable x:TypeArguments="x:Boolean" Name="isFirstLoad" />
      <Variable x:TypeArguments="x:Boolean" Default="False" Name="exitWorkflow" />
      <Variable x:TypeArguments="x:Boolean" Name="isRefreshTimeExceeded" />
      <Variable x:TypeArguments="x:String" Default="'" Name="StringDelimeter" />
      <Variable x:TypeArguments="x:String" Default="TempestToEssentials.xaml" Name="WF_NAME" />
      <Variable x:TypeArguments="x:String" Default="Tempest to Essentials" Name="WF_TITLE" />
      <Variable x:TypeArguments="x:String" Default="Tempest" Name="SELECT_COLLECTION_NAME" />
    </Sequence.Variables>
    <Sequence DisplayName="Seq - Init" sap2010:WorkflowViewState.IdRef="Sequence_17">
      <Assign DisplayName="Init - zoomEnvelope" sap2010:WorkflowViewState.IdRef="Assign_10">
        <Assign.To>
          <OutArgument x:TypeArguments="esri:Envelope">[zoomEnvelope]</OutArgument>
        </Assign.To>
        <Assign.Value>
          <InArgument x:TypeArguments="esri:Envelope">[Nothing]</InArgument>
        </Assign.Value>
      </Assign>
    </Sequence>
    <gwta:TempestStart DisplayName="Get Tempest Session ID" ExternalId="" sap2010:WorkflowViewState.IdRef="TempestStart_1" IsFirstLoad="[isFirstLoad]" TempestSessionID="[tempestSessionId]" />
    <gwa:Log DisplayName="Log - TempestSessionID" sap2010:WorkflowViewState.IdRef="Log_11" Message="[String.Format(&quot;{0}!!DEBUG: Tempest Start: isFirstLoad: ({1}), tempestSessionID: ({2})&quot;, Environment.NewLine, isFirstLoad, tempestSessionId)]" />
    <If Condition="[String.IsNullOrEmpty(tempestSessionId)]" DisplayName="If existing TempestSessionID" sap2010:WorkflowViewState.IdRef="If_12">
      <If.Then>
        <gwa:ServerPlaceHolder Description="If no Tempest session id, then the map has been launched independent of Tempest and nothing needs to be done." sap2010:WorkflowViewState.IdRef="ServerPlaceHolder_1" />
      </If.Then>
      <If.Else>
        <Sequence DisplayName="Seq - Existing TempestSessionId" sap2010:WorkflowViewState.IdRef="Sequence_13">
          <Sequence.Variables>
            <Variable x:TypeArguments="x:String" Default="0" Name="MapServiceId" />
            <Variable x:TypeArguments="x:String" Default="GISLINK" Name="LinkFieldName" />
          </Sequence.Variables>
          <Sequence DisplayName="Seq - Get DataStamp" sap2010:WorkflowViewState.IdRef="Sequence_5">
            <Sequence.Variables>
              <Variable x:TypeArguments="sd:DataTable" Name="dataTable1" />
              <Variable x:TypeArguments="x:String" Name="lastTime" />
            </Sequence.Variables>
            <If sap2010:Annotation.AnnotationText="DB Query to get the DateStamp of the Tempest Session" Condition="[System.Configuration.ConfigurationManager.ConnectionStrings(&quot;TempestConnectionString&quot;) Is Nothing Or &#xA;System.Configuration.ConfigurationManager.ConnectionStrings(&quot;TempestConnectionString&quot;).ProviderName Is Nothing Or &#xA;System.Configuration.ConfigurationManager.ConnectionStrings(&quot;TempestConnectionString&quot;).ProviderName.IndexOf(&quot;Oracle&quot;, StringComparison.OrdinalIgnoreCase) = -1]" DisplayName="Get dataTable from Tempest DB" sap2010:WorkflowViewState.IdRef="If_1">
              <If.Then>
                <gwa:SqlQuery CommandText="SELECT DATE_STAMP FROM WC_SESSION_DETAILS WHERE SESSION_ID = @TempestSessionId" ConnectionConfigurationName="TempestConnectionString" DisplayName="SqlQuery (SQL Server) - Select Tempest Session" sap2010:WorkflowViewState.IdRef="SqlQuery_1" Results="[dataTable1]">
                  <gwa:SqlQuery.Parameters>
                    <InArgument x:TypeArguments="x:String" x:Key="TempestSessionId">[tempestSessionId]</InArgument>
                  </gwa:SqlQuery.Parameters>
                </gwa:SqlQuery>
              </If.Then>
              <If.Else>
                <gwa:SqlQuery CommandText="SELECT DATE_STAMP FROM WC_SESSION_DETAILS WHERE SESSION_ID = :TempestSessionId" ConnectionConfigurationName="TempestConnectionString" DisplayName="SqlQuery (Oracle)" sap2010:WorkflowViewState.IdRef="SqlQuery_2" Results="[dataTable1]">
                  <gwa:SqlQuery.Parameters>
                    <InArgument x:TypeArguments="x:String" x:Key="TempestSessionId">[tempestSessionId]</InArgument>
                  </gwa:SqlQuery.Parameters>
                </gwa:SqlQuery>
              </If.Else>
            </If>
            <Assign sap2010:WorkflowViewState.IdRef="Assign_1">
              <Assign.To>
                <OutArgument x:TypeArguments="x:String">[dataTable1.TableName]</OutArgument>
              </Assign.To>
              <Assign.Value>
                <InArgument x:TypeArguments="x:String">TempestResults</InArgument>
              </Assign.Value>
            </Assign>
            <If sap2010:Annotation.AnnotationText="Two External Activities to execute:&#xA;&#xA;- on exceeding the configured RefreshTime, Exit the workflow&#xA;- update the Last Update Time" Condition="[dataTable1 IsNot Nothing AndAlso dataTable1.Rows.Count &gt; 0]" DisplayName="If existing TempestSession - date" sap2010:WorkflowViewState.IdRef="If_4">
              <If.Then>
                <Sequence sap2010:WorkflowViewState.IdRef="Sequence_4">
                  <If Condition="[isFirstLoad]" DisplayName="If isFirstLoad" sap2010:WorkflowViewState.IdRef="If_3">
                    <If.Then>
                      <Sequence sap2010:Annotation.AnnotationText="Execute ' SetLastUpdateTime' External activity" DisplayName="Seq - SetLastUpdateTime" sap2010:WorkflowViewState.IdRef="Sequence_1">
                        <gwa:Log sap2010:WorkflowViewState.IdRef="Log_1" Message="This is the first execution for this session so saving DATE_STAMP as last time executed" />
                        <gwa:DynamicExternal DisplayName="DynamicExternal - SetLastUpdateTime" ExternalId="SetLastUpdateTime" sap2010:WorkflowViewState.IdRef="DynamicExternal_1">
                          <gwa:DynamicExternal.InArguments>
                            <gwa1:ArgumentWrapper x:TypeArguments="InArgument" IsRequired="False" Name="lastUpdateTime">
                              <gwa1:ArgumentWrapper.Argument>
                                <InArgument x:TypeArguments="s1:DateTime">[CType(dataTable1.Rows(0)(0), DateTime)]</InArgument>
                              </gwa1:ArgumentWrapper.Argument>
                            </gwa1:ArgumentWrapper>
                          </gwa:DynamicExternal.InArguments>
                        </gwa:DynamicExternal>
                      </Sequence>
                    </If.Then>
                    <If.Else>
                      <Sequence DisplayName="Seq - no First Load" sap2010:WorkflowViewState.IdRef="Sequence_3">
                        <Sequence.Variables>
                          <Variable x:TypeArguments="s1:DateTime" Name="now" />
                        </Sequence.Variables>
                        <gwa:Log sap2010:WorkflowViewState.IdRef="Log_2" Message="Calling CheckIfRefreshTimeExceeded" />
                        <gwa:DynamicExternal sap2010:Annotation.AnnotationText="External Activity 'CheckIfRefreshTimeExceeded'" DisplayName="DynamicExternal - CheckIfRefreshTimeExceeded" ExternalId="CheckIfRefreshTimeExceeded" sap2010:WorkflowViewState.IdRef="DynamicExternal_2">
                          <gwa:DynamicExternal.InArguments>
                            <gwa1:ArgumentWrapper x:TypeArguments="InArgument" IsRequired="False" Name="timeToCheck">
                              <gwa1:ArgumentWrapper.Argument>
                                <InArgument x:TypeArguments="s1:DateTime">[CType(dataTable1.Rows(0)(0), DateTime)]</InArgument>
                              </gwa1:ArgumentWrapper.Argument>
                            </gwa1:ArgumentWrapper>
                            <gwa1:ArgumentWrapper x:TypeArguments="InArgument" IsRequired="False" Name="minimumInterval">
                              <gwa1:ArgumentWrapper.Argument>
                                <InArgument x:TypeArguments="x:Int32">2</InArgument>
                              </gwa1:ArgumentWrapper.Argument>
                            </gwa1:ArgumentWrapper>
                          </gwa:DynamicExternal.InArguments>
                          <gwa:DynamicExternal.OutArguments>
                            <gwa1:ArgumentWrapper x:TypeArguments="OutArgument" IsRequired="False" Name="isRefreshTimeExceeded">
                              <gwa1:ArgumentWrapper.Argument>
                                <OutArgument x:TypeArguments="x:Boolean">[isRefreshTimeExceeded]</OutArgument>
                              </gwa1:ArgumentWrapper.Argument>
                            </gwa1:ArgumentWrapper>
                          </gwa:DynamicExternal.OutArguments>
                        </gwa:DynamicExternal>
                        <gwa:Log DisplayName="Log - Ouput of CheckIfRefreshTimeExceeded" sap2010:WorkflowViewState.IdRef="Log_14" Message="[String.Format(&quot;{0}: isRefreshTimeExceeded: ({1})&quot;, Environment.NewLine, isRefreshTimeExceeded)]" />
                        <If sap2010:Annotation.AnnotationText="Exit the workflow" Condition="[isRefreshTimeExceeded]" DisplayName="If exceeding the refresh time" sap2010:WorkflowViewState.IdRef="If_2">
                          <If.Then>
                            <Assign DisplayName="Assign - existWorkflow: False" sap2010:WorkflowViewState.IdRef="Assign_9">
                              <Assign.To>
                                <OutArgument x:TypeArguments="x:Boolean">[exitWorkflow]</OutArgument>
                              </Assign.To>
                              <Assign.Value>
                                <InArgument x:TypeArguments="x:Boolean">False</InArgument>
                              </Assign.Value>
                            </Assign>
                          </If.Then>
                          <If.Else>
                            <Sequence sap2010:WorkflowViewState.IdRef="Sequence_2">
                              <Assign DisplayName="Assign - existWorkflow: True" sap2010:WorkflowViewState.IdRef="Assign_2">
                                <Assign.To>
                                  <OutArgument x:TypeArguments="x:Boolean">[exitWorkflow]</OutArgument>
                                </Assign.To>
                                <Assign.Value>
                                  <InArgument x:TypeArguments="x:Boolean">True</InArgument>
                                </Assign.Value>
                              </Assign>
                            </Sequence>
                          </If.Else>
                        </If>
                      </Sequence>
                    </If.Else>
                  </If>
                </Sequence>
              </If.Then>
            </If>
          </Sequence>
          <If sap2010:Annotation.AnnotationText="Main Body of the logic.&#xA;&#xA;- Create Tempest Session&#xA;- Collect Tempest Mapping&#xA;- Send Tempest Configuration&#xA;- Init Tempest Session" Condition="[exitWorkflow = True]" DisplayName="Main Logic on Tempest To Essential" sap2010:WorkflowViewState.IdRef="If_11">
            <If.Then>
              <gwa:Log DisplayName="Log - exitWorkflow" sap2010:WorkflowViewState.IdRef="Log_13" Message="exitWorkflow" />
            </If.Then>
            <If.Else>
              <Sequence DisplayName="Seq - create Tempest session" sap2010:WorkflowViewState.IdRef="Sequence_12">
                <Sequence.Variables>
                  <Variable x:TypeArguments="scg2:IDictionary(x:String, esri:FeatureSet)" Name="featureSets" />
                </Sequence.Variables>
                <gwa:Log DisplayName="Log - Debug" sap2010:WorkflowViewState.IdRef="Log_15" Message="*** Create Tempest Session" />
                <gwta:CreateTempestSession ErrorMessage="{x:Null}" SiteName="{x:Null}" DatabaseConnectionStringName="TempestConnectionString" DbExportFields="" DbZoomFields="" DeleteSessionDetailsSql="DELETE FROM WC_SESSION_DETAILS WHERE SESSION_ID = {0}SessionId AND GIS_LAYER_NAME = {1}GIS_LAYER_NAME" DisplayName="Create Tempest Session" GisExportFields="" GisZoomFields="PROPERTY=PropertyTaxId" sap2010:WorkflowViewState.IdRef="CreateTempestSession_1" InsertSessionDetailsSql="INSERT INTO WC_SESSION_DETAILS (SESSION_DETAIL_ID, SESSION_ID, SEARCH_LAYER_ID, LEGAL_ID, GISLINK, GIS_LAYER_ID, GIS_LAYER_NAME, DATE_STAMP, USER_STAMP) SELECT {1}, '{2}', WC_SEARCH_LAYERS.SEARCH_LAYER_ID, LAND_LEGAL.LEGAL_ID, LAND_LEGAL.GISLINK, LAND_LEGAL.GIS_LAYER_ID, WC_GIS_LAYERS.GIS_LAYER_NAME, {3}, 'ESSENTIALS' FROM LAND_LEGAL, WC_GIS_LAYERS, WC_SEARCH_LAYERS WHERE LAND_LEGAL.{4} = {0}UniqueId AND WC_GIS_LAYERS.GIS_LAYER_NAME = {0}LayerName AND WC_GIS_LAYERS.SEARCH_LAYER_ID = WC_SEARCH_LAYERS.SEARCH_LAYER_ID" LayerNameMappings="PROPERTY=Parcel" ProviderName="System.Data.SqlClient" SelectMapLayersSql="SELECT DISTINCT (GIS_LAYER_NAME) FROM WC_GIS_LAYERS" SelectSessionDetailsSql="SELECT L.{1} FROM WC_SESSION_DETAILS W, LAND_LEGAL L WHERE W.SESSION_ID = {0}SessionId AND W.LEGAL_ID = L.LEGAL_ID AND W.GIS_LAYER_NAME = {0}LayerName" TempestSession="[tempestSession]" TempestSessionId="[tempestSessionId]" ZoomBuffer="0" />
                <Flowchart sap2010:Annotation.AnnotationText="Set tempestMapping" DisplayName="Collect Tempest Mapping Variables" sap2010:WorkflowViewState.IdRef="Flowchart_1">
                  <Flowchart.StartNode>
                    <FlowDecision x:Name="__ReferenceID4" Condition="[tempestSession.GisZoomFields IsNot Nothing]" sap2010:WorkflowViewState.IdRef="FlowDecision_5">
                      <FlowDecision.True>
                        <FlowStep x:Name="__ReferenceID5" sap2010:WorkflowViewState.IdRef="FlowStep_5">
                          <AddToCollection x:TypeArguments="scg2:KeyValuePair(x:String, x:String)" Collection="[tempestMappings]" DisplayName="GisZoomFields" sap2010:WorkflowViewState.IdRef="AddToCollection`1_1" Item="[New KeyValuePair(Of String, String)(&quot;GisZoomFields&quot;, tempestSession.GisZoomFields.ToString)]" />
                          <FlowStep.Next>
                            <FlowDecision x:Name="__ReferenceID3" Condition="[tempestSession.DbZoomFields IsNot Nothing]" sap2010:WorkflowViewState.IdRef="FlowDecision_4">
                              <FlowDecision.True>
                                <FlowStep x:Name="__ReferenceID6" sap2010:WorkflowViewState.IdRef="FlowStep_4">
                                  <AddToCollection x:TypeArguments="scg2:KeyValuePair(x:String, x:String)" Collection="[tempestMappings]" DisplayName="DbZoomFields" sap2010:WorkflowViewState.IdRef="AddToCollection`1_2" Item="[New KeyValuePair(Of String, String)(&quot;DbZoomFields&quot;, tempestSession.DbZoomFields.ToString)]" />
                                  <FlowStep.Next>
                                    <FlowDecision x:Name="__ReferenceID2" Condition="[tempestSession.GisExportFields IsNot Nothing]" sap2010:WorkflowViewState.IdRef="FlowDecision_3">
                                      <FlowDecision.True>
                                        <FlowStep x:Name="__ReferenceID7" sap2010:WorkflowViewState.IdRef="FlowStep_3">
                                          <AddToCollection x:TypeArguments="scg2:KeyValuePair(x:String, x:String)" Collection="[tempestMappings]" DisplayName="GisExportFields" sap2010:WorkflowViewState.IdRef="AddToCollection`1_3" Item="[New KeyValuePair(Of String, String)(&quot;GisExportFields&quot;, tempestSession.GisExportFields.ToString)]" />
                                          <FlowStep.Next>
                                            <FlowDecision x:Name="__ReferenceID1" Condition="[tempestSession.DbExportFields IsNot Nothing]" sap2010:WorkflowViewState.IdRef="FlowDecision_2">
                                              <FlowDecision.True>
                                                <FlowStep x:Name="__ReferenceID8" sap2010:WorkflowViewState.IdRef="FlowStep_2">
                                                  <AddToCollection x:TypeArguments="scg2:KeyValuePair(x:String, x:String)" Collection="[tempestMappings]" DisplayName="DbExportFields" sap2010:WorkflowViewState.IdRef="AddToCollection`1_4" Item="[New KeyValuePair(Of String, String)(&quot;DbExportFields&quot;, tempestSession.DbExportFields.ToString)]" />
                                                  <FlowStep.Next>
                                                    <FlowDecision x:Name="__ReferenceID0" Condition="[tempestSession.LayerNameMappings IsNot Nothing]" sap2010:WorkflowViewState.IdRef="FlowDecision_1">
                                                      <FlowDecision.True>
                                                        <FlowStep x:Name="__ReferenceID9" sap2010:WorkflowViewState.IdRef="FlowStep_1">
                                                          <AddToCollection x:TypeArguments="scg2:KeyValuePair(x:String, x:String)" Collection="[tempestMappings]" DisplayName="LayerNameMappings" sap2010:WorkflowViewState.IdRef="AddToCollection`1_5" Item="[New KeyValuePair(Of String, String)(&quot;LayerNameMappings&quot;, System.Web.HttpUtility.UrlEncode(tempestSession.LayerNameMappings.ToString))]" />
                                                        </FlowStep>
                                                      </FlowDecision.True>
                                                    </FlowDecision>
                                                  </FlowStep.Next>
                                                </FlowStep>
                                              </FlowDecision.True>
                                              <FlowDecision.False>
                                                <x:Reference>__ReferenceID0</x:Reference>
                                              </FlowDecision.False>
                                            </FlowDecision>
                                          </FlowStep.Next>
                                        </FlowStep>
                                      </FlowDecision.True>
                                      <FlowDecision.False>
                                        <x:Reference>__ReferenceID1</x:Reference>
                                      </FlowDecision.False>
                                    </FlowDecision>
                                  </FlowStep.Next>
                                </FlowStep>
                              </FlowDecision.True>
                              <FlowDecision.False>
                                <x:Reference>__ReferenceID2</x:Reference>
                              </FlowDecision.False>
                            </FlowDecision>
                          </FlowStep.Next>
                        </FlowStep>
                      </FlowDecision.True>
                      <FlowDecision.False>
                        <x:Reference>__ReferenceID3</x:Reference>
                      </FlowDecision.False>
                    </FlowDecision>
                  </Flowchart.StartNode>
                  <x:Reference>__ReferenceID4</x:Reference>
                  <x:Reference>__ReferenceID5</x:Reference>
                  <x:Reference>__ReferenceID3</x:Reference>
                  <x:Reference>__ReferenceID6</x:Reference>
                  <x:Reference>__ReferenceID2</x:Reference>
                  <x:Reference>__ReferenceID7</x:Reference>
                  <x:Reference>__ReferenceID1</x:Reference>
                  <x:Reference>__ReferenceID8</x:Reference>
                  <x:Reference>__ReferenceID0</x:Reference>
                  <x:Reference>__ReferenceID9</x:Reference>
                </Flowchart>
                <gwta:RetrieveTempestMappings DisplayName="Send Tempest Configuration" ExternalId="" sap2010:WorkflowViewState.IdRef="RetrieveTempestMappings_1" TempestMappings="[tempestMappings]" />
                <InvokeMethod DisplayName="InvokeMethod - Initialize tempestSession" sap2010:WorkflowViewState.IdRef="InvokeMethod_1" MethodName="Initialize">
                  <InvokeMethod.TargetObject>
                    <InArgument x:TypeArguments="gwtd:TempestSession">[tempestSession]</InArgument>
                  </InvokeMethod.TargetObject>
                </InvokeMethod>
                <Assign DisplayName="Assign - tempestResults" sap2010:WorkflowViewState.IdRef="Assign_3">
                  <Assign.To>
                    <OutArgument x:TypeArguments="scg2:Dictionary(x:String, scg2:List(x:String))">[tempestResults]</OutArgument>
                  </Assign.To>
                  <Assign.Value>
                    <InArgument x:TypeArguments="scg2:Dictionary(x:String, scg2:List(x:String))">[tempestSession.GetTempestSelection()]</InArgument>
                  </Assign.Value>
                </Assign>
                <gwa:CreateDictionary x:TypeArguments="x:String, esri:FeatureSet" sap2010:WorkflowViewState.IdRef="CreateDictionary`2_1" Result="[featureSets]" />
                <ForEach x:TypeArguments="scg2:KeyValuePair(x:String, scg2:List(x:String))" sap2010:Annotation.AnnotationText="Query Task against all configured Tempest Layers.&#xA;&#xA;Input: temest Results, which is Dictionary&lt;string, List&lt;string&gt;&gt;&#xA;&#xA;Ouput: featureSets" DisplayName="Loop - tempestResults to Query" sap2010:WorkflowViewState.IdRef="ForEach`1_3" Values="[tempestResults]">
                  <ActivityAction x:TypeArguments="scg2:KeyValuePair(x:String, scg2:List(x:String))">
                    <ActivityAction.Argument>
                      <DelegateInArgument x:TypeArguments="scg2:KeyValuePair(x:String, scg2:List(x:String))" Name="layer" />
                    </ActivityAction.Argument>
                    <If Condition="[layer.Value.Count &gt; 0]" DisplayName="If - Existing feature values per Layer" sap2010:WorkflowViewState.IdRef="If_7">
                      <If.Then>
                        <Flowchart DisplayName="Query for Features" sap2010:WorkflowViewState.IdRef="Flowchart_2">
                          <Flowchart.Variables>
                            <Variable x:TypeArguments="st:StringBuilder" Default="[New StringBuilder]" Name="queryValues" />
                            <Variable x:TypeArguments="esri:FeatureSet" Name="featureSet" />
                            <Variable x:TypeArguments="x:String" Name="layerId" />
                            <Variable x:TypeArguments="x:String" Name="mapserviceUrl" />
                            <Variable x:TypeArguments="esri:Envelope" Name="featuresEnvelope" />
                            <Variable x:TypeArguments="x:String" Name="mapserviceProxyUrl" />
                            <Variable x:TypeArguments="x:String" Name="mapserviceToken" />
                          </Flowchart.Variables>
                          <Flowchart.StartNode>
                            <FlowStep x:Name="__ReferenceID10" sap2010:WorkflowViewState.IdRef="FlowStep_13">
                              <ForEach x:TypeArguments="x:String" DisplayName="Create IN clause values" sap2010:WorkflowViewState.IdRef="ForEach`1_1" Values="[layer.Value]">
                                <ActivityAction x:TypeArguments="x:String">
                                  <ActivityAction.Argument>
                                    <DelegateInArgument x:TypeArguments="x:String" Name="item" />
                                  </ActivityAction.Argument>
                                  <InvokeMethod sap2010:WorkflowViewState.IdRef="InvokeMethod_2" MethodName="Append">
                                    <InvokeMethod.TargetObject>
                                      <InArgument x:TypeArguments="st:StringBuilder">[queryValues]</InArgument>
                                    </InvokeMethod.TargetObject>
                                    <InArgument x:TypeArguments="x:String">[string.Format("{0}{1}{0},", StringDelimeter, item)]</InArgument>
                                  </InvokeMethod>
                                </ActivityAction>
                              </ForEach>
                              <FlowStep.Next>
                                <FlowStep x:Name="__ReferenceID13" sap2010:WorkflowViewState.IdRef="FlowStep_12">
                                  <gwa:GetMapServiceInfo sap2010:WorkflowViewState.IdRef="GetMapServiceInfo_1" LayerId="[layerId]" LayerName="[layer.Key]" MapServiceId="[MapServiceId]" MapServiceUrl="[mapserviceUrl]" ProxyUrl="[mapserviceProxyUrl]" Token="[mapserviceToken]" />
                                  <FlowStep.Next>
                                    <FlowStep x:Name="__ReferenceID17" sap2010:WorkflowViewState.IdRef="FlowStep_11">
                                      <gwa:Log DisplayName="Log - Layer Name and ID" sap2010:WorkflowViewState.IdRef="Log_3" Message="[string.Format(&quot;{0}:: Layer name = {1}; layer id = {2}&quot;, Environment.Newline, layer.Key, layerId)]" />
                                      <FlowStep.Next>
                                        <FlowStep x:Name="__ReferenceID14" sap2010:WorkflowViewState.IdRef="FlowStep_10">
                                          <TryCatch sap2010:WorkflowViewState.IdRef="TryCatch_1">
                                            <TryCatch.Try>
                                              <Sequence sap2010:WorkflowViewState.IdRef="Sequence_6">
                                                <Sequence.Variables>
                                                  <Variable x:TypeArguments="x:String" Name="layerKey" />
                                                </Sequence.Variables>
                                                <Assign sap2010:WorkflowViewState.IdRef="Assign_4">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="x:String">[layerKey]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="x:String">[tempestSession.LayerNameMappings.AllKeys.FirstOrDefault(Function(key) tempestSession.LayerNameMappings(key) = layer.Key)]</InArgument>
                                                  </Assign.Value>
                                                </Assign>
                                                <Assign sap2010:WorkflowViewState.IdRef="Assign_5">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="x:String">[LinkFieldName]</OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="x:String">[tempestSession.GisZoomFields(layerKey)]</InArgument>
                                                  </Assign.Value>
                                                </Assign>
                                                <If Condition="[string.IsNullOrEmpty(LinkFieldName)]" sap2010:WorkflowViewState.IdRef="If_5">
                                                  <If.Then>
                                                    <Assign DisplayName="Assign Default Field" sap2010:WorkflowViewState.IdRef="Assign_6">
                                                      <Assign.To>
                                                        <OutArgument x:TypeArguments="x:String">[LinkFieldName]</OutArgument>
                                                      </Assign.To>
                                                      <Assign.Value>
                                                        <InArgument x:TypeArguments="x:String">OBJECTID</InArgument>
                                                      </Assign.Value>
                                                    </Assign>
                                                  </If.Then>
                                                </If>
                                                <gwa:Log sap2010:WorkflowViewState.IdRef="Log_4" Message="[mapserviceUrl + &quot;/&quot; + layerId + &quot;/query&quot;]" />
                                                <gwa:Log sap2010:WorkflowViewState.IdRef="Log_5" Message="[LinkFieldName + &quot; IN (&quot; + queryValues.ToString.Trim(New Char(){&quot;,&quot;c}) + &quot;)&quot;]" />
                                                <gwa:QueryTask sap2010:WorkflowViewState.IdRef="QueryTask_1" OutFields="*" ProxyURL="[mapserviceProxyUrl]" QueryServiceUrl="[mapserviceUrl + &quot;/&quot; + layerId + &quot;/query&quot;]" Results="[featureSet]" ReturnGeometry="True" SpatialRelationship="esriSpatialRelIntersects" Token="[mapserviceToken]" Where="[LinkFieldName + &quot; IN (&quot; + queryValues.ToString.Trim(New Char(){&quot;,&quot;c}) + &quot;)&quot;]" />
                                              </Sequence>
                                            </TryCatch.Try>
                                            <TryCatch.Catches>
                                              <Catch x:TypeArguments="s1:Exception" sap2010:WorkflowViewState.IdRef="Catch`1_1">
                                                <ActivityAction x:TypeArguments="s1:Exception">
                                                  <ActivityAction.Argument>
                                                    <DelegateInArgument x:TypeArguments="s1:Exception" Name="exception" />
                                                  </ActivityAction.Argument>
                                                  <Sequence DisplayName="Retry query with OBJECTID in case mapping is wrong" sap2010:WorkflowViewState.IdRef="Sequence_7">
                                                    <ForEach x:TypeArguments="x:String" DisplayName="Create IN clause values" sap2010:WorkflowViewState.IdRef="ForEach`1_2" Values="[layer.Value]">
                                                      <ActivityAction x:TypeArguments="x:String">
                                                        <ActivityAction.Argument>
                                                          <DelegateInArgument x:TypeArguments="x:String" Name="item" />
                                                        </ActivityAction.Argument>
                                                        <InvokeMethod sap2010:WorkflowViewState.IdRef="InvokeMethod_3" MethodName="Append">
                                                          <InvokeMethod.TargetObject>
                                                            <InArgument x:TypeArguments="st:StringBuilder">[queryValues]</InArgument>
                                                          </InvokeMethod.TargetObject>
                                                          <InArgument x:TypeArguments="x:String">["'" + item + "',"]</InArgument>
                                                        </InvokeMethod>
                                                      </ActivityAction>
                                                    </ForEach>
                                                    <gwa:QueryTask sap2010:WorkflowViewState.IdRef="QueryTask_2" OutFields="*" ProxyURL="[mapserviceProxyUrl]" QueryServiceUrl="[mapserviceUrl + &quot;/&quot; + layerId + &quot;/query&quot;]" Results="[featureSet]" ReturnGeometry="True" SpatialRelationship="esriSpatialRelIntersects" Token="[mapserviceToken]" Where="[&quot;OBJECTID IN (&quot; + queryValues.ToString.Trim(New Char(){&quot;,&quot;c}) + &quot;)&quot;]" />
                                                  </Sequence>
                                                </ActivityAction>
                                              </Catch>
                                            </TryCatch.Catches>
                                          </TryCatch>
                                          <FlowStep.Next>
                                            <FlowDecision x:Name="__ReferenceID11" Condition="[featureSet IsNot Nothing]" sap2010:WorkflowViewState.IdRef="FlowDecision_6">
                                              <FlowDecision.True>
                                                <FlowStep x:Name="__ReferenceID18" sap2010:WorkflowViewState.IdRef="FlowStep_14">
                                                  <If Condition="[layerId &lt;&gt; &quot;&quot;]" DisplayName="Valid layer ID - Add FeatureSet to Dictionary" sap2010:WorkflowViewState.IdRef="If_16">
                                                    <If.Then>
                                                      <gwa:AddToDictionary x:TypeArguments="x:String, esri:FeatureSet" Dictionary="[featureSets]" DisplayName="AddToDictionary&lt;String,FeatureSet&gt; - Add FeatureSet of the Layer" sap2010:WorkflowViewState.IdRef="AddToDictionary`2_2" Key="[layerId]" Value="[featureSet]" />
                                                    </If.Then>
                                                    <If.Else>
                                                      <gwa:Log sap2010:WorkflowViewState.IdRef="Log_19" LogLevel="Warn" Message="[String.Format(&quot;{0}Empty Layer id for a layer name, {1}, to add the query result&quot;, Environment.NewLine, layer.Key)]" />
                                                    </If.Else>
                                                  </If>
                                                  <FlowStep.Next>
                                                    <FlowStep x:Name="__ReferenceID16" sap2010:WorkflowViewState.IdRef="FlowStep_7">
                                                      <gwa:GetFeatureSetExtent FeatureSet="[featureSet]" sap2010:WorkflowViewState.IdRef="GetFeatureSetExtent_1" Result="[featuresEnvelope]" />
                                                      <FlowStep.Next>
                                                        <FlowStep x:Name="__ReferenceID15" sap2010:WorkflowViewState.IdRef="FlowStep_6">
                                                          <If Condition="[zoomEnvelope Is Nothing]" DisplayName="Assign Zoom Envelope" sap2010:WorkflowViewState.IdRef="If_6">
                                                            <If.Then>
                                                              <Sequence sap2010:WorkflowViewState.IdRef="Sequence_8">
                                                                <gwa:Log sap2010:WorkflowViewState.IdRef="Log_6" LogLevel="Debug" Message="assigning featuresEnvelope to zoomEnvelope" />
                                                                <Assign DisplayName="Assign - First zoomEnvelope" sap2010:WorkflowViewState.IdRef="Assign_7">
                                                                  <Assign.To>
                                                                    <OutArgument x:TypeArguments="esri:Envelope">[zoomEnvelope]</OutArgument>
                                                                  </Assign.To>
                                                                  <Assign.Value>
                                                                    <InArgument x:TypeArguments="esri:Envelope">[featuresEnvelope]</InArgument>
                                                                  </Assign.Value>
                                                                </Assign>
                                                              </Sequence>
                                                            </If.Then>
                                                            <If.Else>
                                                              <Sequence sap2010:WorkflowViewState.IdRef="Sequence_9">
                                                                <gwa:Log sap2010:WorkflowViewState.IdRef="Log_7" LogLevel="Debug" Message="merging featuresEnvelope with zoomEnvelope" />
                                                                <Assign DisplayName="Assign - Union zoomEnvelop" sap2010:WorkflowViewState.IdRef="Assign_8">
                                                                  <Assign.To>
                                                                    <OutArgument x:TypeArguments="esri:Envelope">[zoomEnvelope]</OutArgument>
                                                                  </Assign.To>
                                                                  <Assign.Value>
                                                                    <InArgument x:TypeArguments="esri:Envelope">[zoomEnvelope.Extent.Union(featuresEnvelope.Extent)]</InArgument>
                                                                  </Assign.Value>
                                                                </Assign>
                                                              </Sequence>
                                                            </If.Else>
                                                          </If>
                                                        </FlowStep>
                                                      </FlowStep.Next>
                                                    </FlowStep>
                                                  </FlowStep.Next>
                                                </FlowStep>
                                              </FlowDecision.True>
                                              <FlowDecision.False>
                                                <FlowStep x:Name="__ReferenceID12" sap2010:WorkflowViewState.IdRef="FlowStep_9">
                                                  <gwa:Log sap2010:WorkflowViewState.IdRef="Log_8" LogLevel="Debug" Message="[String.Format(&quot;{0} :: No features returned from query&quot;, Environment.NewLine)]" />
                                                </FlowStep>
                                              </FlowDecision.False>
                                            </FlowDecision>
                                          </FlowStep.Next>
                                        </FlowStep>
                                      </FlowStep.Next>
                                    </FlowStep>
                                  </FlowStep.Next>
                                </FlowStep>
                              </FlowStep.Next>
                            </FlowStep>
                          </Flowchart.StartNode>
                          <x:Reference>__ReferenceID10</x:Reference>
                          <x:Reference>__ReferenceID11</x:Reference>
                          <x:Reference>__ReferenceID12</x:Reference>
                          <x:Reference>__ReferenceID13</x:Reference>
                          <x:Reference>__ReferenceID14</x:Reference>
                          <x:Reference>__ReferenceID15</x:Reference>
                          <x:Reference>__ReferenceID16</x:Reference>
                          <x:Reference>__ReferenceID17</x:Reference>
                          <x:Reference>__ReferenceID18</x:Reference>
                        </Flowchart>
                      </If.Then>
                      <If.Else>
                        <gwa:Log DisplayName="Log - No features per layer on tempestResults" sap2010:WorkflowViewState.IdRef="Log_17" Message="[String.Format(&quot;{0}:: No feaures per Layer, {1}.&quot;, Environment.NewLine, layer.Key)]" />
                      </If.Else>
                    </If>
                  </ActivityAction>
                </ForEach>
                <If sap2010:Annotation.AnnotationText="a command 'Clear Selection'" Condition="[isFirstLoad]" DisplayName="Clear Selection if it is not first Loaded" sap2010:WorkflowViewState.IdRef="If_8">
                  <If.Else>
                    <gwa:RunExternalCommand CommandName="ClearSelection" sap2010:WorkflowViewState.IdRef="RunExternalCommand_1" />
                  </If.Else>
                </If>
                <If sap2010:Annotation.AnnotationText="Viewer: SelectFeature and Set Map Extent" Condition="[featureSets.Count &gt; 0]" DisplayName="Select Features and Zoom To extent" sap2010:WorkflowViewState.IdRef="If_10">
                  <If.Then>
                    <Sequence DisplayName="Seq - Select Features and Zoom To Extent" sap2010:WorkflowViewState.IdRef="Sequence_11">
                      <If sap2010:Annotation.AnnotationText="Check if there is any feature found on GIS requested from Tempest. Feature data requested from Tempest may not yet mapped in GIS. " Condition="[zoomEnvelope IsNot Nothing]" DisplayName="Handle valid Extent to zoom" sap2010:WorkflowViewState.IdRef="If_15">
                        <If.Then>
                          <Sequence sap2010:WorkflowViewState.IdRef="Sequence_16">
                            <ForEach x:TypeArguments="scg2:KeyValuePair(x:String, esri:FeatureSet)" DisplayName="ForEach - Feaure Set Dictionary" sap2010:WorkflowViewState.IdRef="ForEach`1_4" Values="[featureSets]">
                              <ActivityAction x:TypeArguments="scg2:KeyValuePair(x:String, esri:FeatureSet)">
                                <ActivityAction.Argument>
                                  <DelegateInArgument x:TypeArguments="scg2:KeyValuePair(x:String, esri:FeatureSet)" Name="item" />
                                </ActivityAction.Argument>
                                <Sequence DisplayName="Seq - Loop Feature Sets" sap2010:WorkflowViewState.IdRef="Sequence_10">
                                  <gwa:Log sap2010:WorkflowViewState.IdRef="Log_12" Message="[String.Format(&quot;!!!{0}FS: ({1}) --- # of Features: ({2}), --- isFirstLoad: ({3}){0}&quot;, Environment.NewLine, item.Key, item.Value.Features.Count, isFirstLoad)]" />
                                  <If Condition="[(item.Key &lt;&gt; &quot;&quot;) AndAlso (item.Value IsNot Nothing) AndAlso (item.Value.Features.Count &gt; 0)]" sap2010:WorkflowViewState.IdRef="If_14">
                                    <If.Then>
                                      <Parallel DisplayName="Parallel - SelectFeatures and Set Map Extent" sap2010:WorkflowViewState.IdRef="Parallel_1">
                                        <gwa:SelectFeatures sap2010:Annotation.AnnotationText="Clear Collection First = False is replaced with &#xA;Combine Mode = Geocortex.Workflow.Activities.CombineMode.Union" CollectionName="[SELECT_COLLECTION_NAME]" CombineMode="[Geocortex.Workflow.Activities.CombineMode.Union]" FeatureSet="[item.Value]" sap2010:WorkflowViewState.IdRef="SelectFeatures_1" LayerId="[item.Key]" MapServiceId="[MapServiceId]" ShowPushpins="False" />
                                        <gwa:SetMapExtent sap2010:Annotation.AnnotationText="This can be outside of this Parallel For_Each loop since it is can be run only once rather than executing # of featureset. But leave here to reduce the transaction between Server and Client." Extent="[zoomEnvelope.Extent.Expand(2)]" sap2010:WorkflowViewState.IdRef="SetMapExtent_2" />
                                      </Parallel>
                                    </If.Then>
                                  </If>
                                </Sequence>
                              </ActivityAction>
                            </ForEach>
                          </Sequence>
                        </If.Then>
                        <If.Else>
                          <Sequence DisplayName="Seq - show the message to the user" sap2010:WorkflowViewState.IdRef="Sequence_15">
                            <gwa:Alert DisplayName="Alert - No FeatureSets" sap2010:WorkflowViewState.IdRef="Alert_1" Text="[String.Format(&quot;{0}Not mapped feature found.{0}{0}Please ensure you have not selected a deleted property in Tempest.{0}{0}If you believe the selected feature should display on the map, please submit a Help Desk task.&quot;, Environment.NewLine)]" Title="[WF_TITLE]" />
                            <gwa:ExitWorkflow sap2010:WorkflowViewState.IdRef="ExitWorkflow_1" />
                          </Sequence>
                        </If.Else>
                      </If>
                    </Sequence>
                  </If.Then>
                  <If.Else>
                    <gwa:UpdateGraphicsLayer sap2010:Annotation.AnnotationText="Remove a grpahics when no features to add" GraphicsLayerId="Tempest" sap2010:WorkflowViewState.IdRef="UpdateGraphicsLayer_1" RemoveAllFeatures="True" />
                  </If.Else>
                </If>
              </Sequence>
            </If.Else>
          </If>
        </Sequence>
      </If.Else>
    </If>
    <sads:DebugSymbol.Symbol>d5EBQzpcUHJvZ3JhbSBGaWxlcyAoeDg2KVxMYXRpdHVkZSBHZW9ncmFwaGljc1xHZW9jb3J0ZXggRXNzZW50aWFsc1xEZWZhdWx0XFJFU1QgRWxlbWVudHNcU2l0ZXNcVE5SRE1hcFxSZXNvdXJjZXNcV29ya2Zsb3dzXFRlbXBlc3RUb0Vzc2VudGlhbHMueGFtbOQBhQED5AQOAgEBiQFPiQF1AgEHjwE1jwE8AgEGkQE0kQE3AgEFkgE0kgFOAgEEkwE0kwFLAgEDlAE0lAE9AgEClgEFnwEQAwGnAqABBaABwAEDAaICoQEFoQGAAgMBoAKiAQXiBAoCAQiXAQeeARADAagCoAGpAaABvQEDAaUCoAGIAaABlwEDAaMCoQFkoQH9AQMBoQKiAROiAT0CAQmkAQmkAdQBAwGfAqcBCeAEFAIBC5wBN5wBQAMBqwKZATiZAUYDAakCqQE6qQE9AgENqgE6qgFDAgEMrAELlQIWAwHuAZYCC98EEAIBDrEBDcABEgMBkwLBAQ3IARYDAZACyQENlAISAwHvAZYC0QGWAugBAgEPmAIPmAJ7AwHsAZsCD90EGgIBEbEBdLEBnwQDAZQCswERtwEgAwGaAroBEb4BIAMBlQLGATjGAUYDAZICwwE5wwFPAwGRAskBywHJAYwCAwHwAcsBEZICHAMB8QGYAmqYAngDAe0BnwIRnwKEAQMB6gGgAhGgAogLAwHlAaECEeUCHQMBywHmAhHmAsgBAwHIAecCEesCIAMBxQHsAhHzAhoDAcEB9AIR9AKjAQMBvwH1AhGwBBsCATqxBBG1BBYCATW2BBHcBBYCARKzAaQCswGyAgMBnQK1AVW1AWcDAZsCugGHAroBlQIDAZgCvAFVvAFnAwGWAswBE5ECGAMB8gGfAmWfAoEBAwHrAaACvgqgAtAKAwHoAaAC4gqgAvYKAwHmAaMCRaMCcwMB5AGoAk2oAnoDAeMBrQJVrQKFAQMB4gGyAl2yAowBAwHhAbcCZbcClwEDAeABugI7ugKUAwMB3AG1AjO1AuECAwHYAbACK7AC3AIDAdQBqwIjqwLLAgMB0AGmAhumAsYCAwHMAeYCsgHmAsUBAwHJAekCR+kCVwMBxgHxAmLxAogBAwHEAe4CY+4CcwMBwgH0ApEB9AKgAQMBwAH1AocD9QKZAwMBvQH6AhWuBBoCATuxBF+xBG4CATazBBWzBIMBAgE4tgRstgSIAQIBE7gEFdcEIAIBF9oEFdoE6QECARTMASHMATADAfMBzgEX2QEiAwGLAtwBF48CIgMB9QG6Ao8BugKiAQMB3gG6Av4BugKRAwMB3QG1AocBtQKaAQMB2gG1AvMBtQLeAgMB2QGwAn+wApIBAwHWAbAC7AGwAtkCAwHVAasCd6sCigEDAdIBqwLhAasCyAIDAdEBpgJvpgKCAQMBzgGmAtoBpgLDAgMBzQH6AiP6Aj8CATz8AhmpBCUCAUCsBBmsBPEBAgE+swQ5swRJAgE5uQQX1gQcAgEY2gSMAdoElQECARbaBOAB2gTmAQIBFc8BGc8BrgEDAY4C0AEZ2AEvAwGMAuABGeABeQMBiQLhARn1AS8DAYQC9gEZ9gH6AQMBggL3ARmOAh4DAfYB/gJS/gJnAgFBiAMflAMpAwG0AZcDI5cDlgIDAacBmgMnmgP3AQMBpQGdAyvdAzYCAWbfA17fA3oCAWWTBDOTBNoBAgFj4gMz6QM4AgFZ7AM37APAAQIBVe8DO4oEQAIBQqwEjwGsBO4BAgE/uQTMAbkE6gECARm7BBvOBCYCASDRBBvUBCYCARrPAVLPAasBAwGPAtQBS9QBcwMBjQLgAVLgAXYDAYoC5QFL5QFzAwGIAuoBR+oBSAMBhwLxAUrxAWEDAYUC9gGLAfYB9wEDAYMC9wFd9wF2AwH3AfkBHYACJgMB/gGDAh2MAigDAfkBiAOeAYgDrQEDAbsBjQMjkgMyAwG1AZcDeJcDgwEDAbIBlwOOAZcDmwEDAbABlwOpAZcDuQEDAa4BlwOAApcDkwIDAawBlwPjAZcD+QEDAaoBlwPIAZcD2QEDAagBmgOGAZoD9AEDAaYBnwMvwgM6AgF+ygMz2QM+AgFnkwR9kwTXAQIBZOIDQeIDYgIBWuQDN+QDxQICAV7nAzfnA4MCAgFc7AOpAewDvQECAVfsA1vsA2kCAVbvA0nvA2QCAUPxAz/7A0oCAU3+Az+IBEoCAUS8BB3NBCcCASHSBB3SBI4DAgEc0wQd0wRiAgEb/gFJ/gFOAwGBAvsBSvsBWAMB/wGEAh+LAigDAfoBkQNMkQOAAQMBuAGPA1aPA2MDAbYBowMxqgM6AwGhAasDMbIDOgMBnQGzAzG+AzYDAZYBvwMxvwOtAQMBkgHAAzHAA9oBAwGOAcEDMcED2QMCAX/LAzXXAz8CAXbYAzXYA9UDAgFo5AO0AuQDwgICAWLkA4MB5AOSAQIBYeQDogLkA60CAgFf5wOBAecDgAICAV3yA0HyA7oBAgFT8wNB+gNKAgFO/wNB/wO6AQIBS4AEQYcESgIBRbwEyAG8BNcBAgE0wQQhywQsAgEi0gR80gT4AgIBH9IE/wLSBIsDAgEdiQJLiQJPAwH9AYYCTIYCWgMB+wGoA1yoA9YBAwGkAaUDXaUDZwMBogGwA1ywA4QBAwGgAa0DXa0DbAMBngGzAz+zA2YDAZcBtQM1vAM+AwGZAb8Dar8DqgEDAZMBwANqwAPXAQMBjwHBA3jBA3sDAY0BwQOuAsEDyAIDAYwBwQP1AcEDgwIDAYsBwQPpAsED1gMDAYgBwQOFAcEDmwEDAYYBwQPPAsED4gIDAYQBwQOTAsEDmQIDAYMBwQOsAcED7AEDAYABywO0AcsDwwECAXzQAznVA0gCAXfYA3zYA38CAXXYA7IC2APMAgIBdNgD+QHYA4cCAgFz2APtAtgD0gMCAXHYA4kB2AOfAQIBb9gD0wLYA+YCAgFt2AOXAtgDnQICAWzYA7AB2APwAQIBafIDiwHyA7cBAgFU+ANx+AODAQIBUfUDcvUDgAECAU//A4sB/wO3AQIBTIUEcYUEpQECAUiCBHKCBIABAgFGwgQjwgSJAgIBMsMEI8oEKAIBI7oDYLoDaAMBnAG3A2G3A3ADAZoB1ANi1AN1AgF60gNs0gN5AgF4wgRdwgSGAgIBM8MEMcMEowECASTFBCfIBDICASXGBCnGBNYDAgEpxwQpxwT6AgIBJsYElAPGBKADAgExxgSLAsYEvgICATDGBOQBxgT+AQIBLsYEygLGBNgCAgEtxgSuA8YEvgMCASvGBMwDxgTTAwIBKscEpQLHBMYCAgEn</sads:DebugSymbol.Symbol>
  </Sequence>
  <sap2010:WorkflowViewState.ViewStateManager>
    <sap2010:ViewStateManager>
      <sap2010:ViewStateData Id="Assign_10" sap:VirtualizedContainerService.HintSize="242,60" />
      <sap2010:ViewStateData Id="Sequence_17" sap:VirtualizedContainerService.HintSize="264,184">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="TempestStart_1" sap:VirtualizedContainerService.HintSize="264,22" />
      <sap2010:ViewStateData Id="Log_11" sap:VirtualizedContainerService.HintSize="264,61" />
      <sap2010:ViewStateData Id="ServerPlaceHolder_1" sap:VirtualizedContainerService.HintSize="314,83" />
      <sap2010:ViewStateData Id="SqlQuery_1" sap:VirtualizedContainerService.HintSize="211,136" />
      <sap2010:ViewStateData Id="SqlQuery_2" sap:VirtualizedContainerService.HintSize="211,136" />
      <sap2010:ViewStateData Id="If_1" sap:VirtualizedContainerService.HintSize="464,311">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_1" sap:VirtualizedContainerService.HintSize="464,60" />
      <sap2010:ViewStateData Id="Log_1" sap:VirtualizedContainerService.HintSize="482,61" />
      <sap2010:ViewStateData Id="DynamicExternal_1" sap:VirtualizedContainerService.HintSize="482,175" />
      <sap2010:ViewStateData Id="Sequence_1" sap:VirtualizedContainerService.HintSize="504,423">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Log_2" sap:VirtualizedContainerService.HintSize="531,61" />
      <sap2010:ViewStateData Id="DynamicExternal_2" sap:VirtualizedContainerService.HintSize="531,246">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Log_14" sap:VirtualizedContainerService.HintSize="531,61" />
      <sap2010:ViewStateData Id="Assign_9" sap:VirtualizedContainerService.HintSize="242,60" />
      <sap2010:ViewStateData Id="Assign_2" sap:VirtualizedContainerService.HintSize="242,60" />
      <sap2010:ViewStateData Id="Sequence_2" sap:VirtualizedContainerService.HintSize="264,184">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="If_2" sap:VirtualizedContainerService.HintSize="531,355">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_3" sap:VirtualizedContainerService.HintSize="553,967">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="If_3" sap:VirtualizedContainerService.HintSize="200,51">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_4" sap:VirtualizedContainerService.HintSize="222,175">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="If_4" sap:VirtualizedContainerService.HintSize="464,164">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_5" sap:VirtualizedContainerService.HintSize="200,51">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Log_13" sap:VirtualizedContainerService.HintSize="235,61" />
      <sap2010:ViewStateData Id="Log_15" sap:VirtualizedContainerService.HintSize="824,61" />
      <sap2010:ViewStateData Id="CreateTempestSession_1" sap:VirtualizedContainerService.HintSize="824,22" />
      <sap2010:ViewStateData Id="AddToCollection`1_1" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="AddToCollection`1_2" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="AddToCollection`1_3" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="AddToCollection`1_4" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="AddToCollection`1_5" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="FlowStep_1">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">0,679</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">110,591 110,637.446666666667 295,637.446666666667 295,662.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_1" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">270,652.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="TrueConnector">270,696 240,696 240,690 200,690</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_2">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">0,559</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">100,581 100,622.5 287.5,622.5 287.5,652.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_2" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">270,532.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="TrueConnector">270,576 240,576 240,570 200,570</av:PointCollection>
            <av:PointCollection x:Key="FalseConnector">340,576 352.5,576 352.5,622.5 322.5,622.5 322.5,652.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_3">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">10,429</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">110,451 110,502.5 287.5,502.5 287.5,532.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_3" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">270,402.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="TrueConnector">270,446 240,446 240,440 210,440</av:PointCollection>
            <av:PointCollection x:Key="FalseConnector">340,446 352.5,446 352.5,502.5 322.5,502.5 322.5,532.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_4">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">0,289</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">100,311 100,372.5 287.5,372.5 287.5,402.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_4" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">270,262.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="TrueConnector">270,306 240,306 240,300 200,300</av:PointCollection>
            <av:PointCollection x:Key="FalseConnector">340,306 352.5,306 352.5,372.5 322.5,372.5 322.5,402.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_5">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">0,149</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">100,171 100,232.5 287.5,232.5 287.5,262.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_5" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">270,122.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="TrueConnector">270,166 240,166 240,160 200,160</av:PointCollection>
            <av:PointCollection x:Key="FalseConnector">340,166 352.5,166 352.5,232.5 322.5,232.5 322.5,262.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Flowchart_1" sap:VirtualizedContainerService.HintSize="824,74">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
            <av:Size x:Key="ShapeSize">60,75</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,107.5 305,107.5 305,122.5</av:PointCollection>
            <x:Double x:Key="Width">627.83109982808446</x:Double>
            <x:Double x:Key="Height">811.17000000000007</x:Double>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="RetrieveTempestMappings_1" sap:VirtualizedContainerService.HintSize="824,22" />
      <sap2010:ViewStateData Id="InvokeMethod_1" sap:VirtualizedContainerService.HintSize="824,128" />
      <sap2010:ViewStateData Id="Assign_3" sap:VirtualizedContainerService.HintSize="242,60" />
      <sap2010:ViewStateData Id="CreateDictionary`2_1" sap:VirtualizedContainerService.HintSize="242,86" />
      <sap2010:ViewStateData Id="InvokeMethod_2" sap:VirtualizedContainerService.HintSize="218,128" />
      <sap2010:ViewStateData Id="ForEach`1_1" sap:VirtualizedContainerService.HintSize="200,51" />
      <sap2010:ViewStateData Id="GetMapServiceInfo_1" sap:VirtualizedContainerService.HintSize="200,51" />
      <sap2010:ViewStateData Id="Log_3" sap:VirtualizedContainerService.HintSize="200,51">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_4" sap:VirtualizedContainerService.HintSize="464,60" />
      <sap2010:ViewStateData Id="Assign_5" sap:VirtualizedContainerService.HintSize="464,60" />
      <sap2010:ViewStateData Id="Assign_6" sap:VirtualizedContainerService.HintSize="242,60" />
      <sap2010:ViewStateData Id="If_5" sap:VirtualizedContainerService.HintSize="464,208" />
      <sap2010:ViewStateData Id="Log_4" sap:VirtualizedContainerService.HintSize="464,61" />
      <sap2010:ViewStateData Id="Log_5" sap:VirtualizedContainerService.HintSize="464,61" />
      <sap2010:ViewStateData Id="QueryTask_1" sap:VirtualizedContainerService.HintSize="464,243" />
      <sap2010:ViewStateData Id="Sequence_6" sap:VirtualizedContainerService.HintSize="486,1017">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="InvokeMethod_3" sap:VirtualizedContainerService.HintSize="218,128" />
      <sap2010:ViewStateData Id="ForEach`1_2" sap:VirtualizedContainerService.HintSize="337,276" />
      <sap2010:ViewStateData Id="QueryTask_2" sap:VirtualizedContainerService.HintSize="337,243" />
      <sap2010:ViewStateData Id="Sequence_7" sap:VirtualizedContainerService.HintSize="359,683">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Catch`1_1" sap:VirtualizedContainerService.HintSize="490,21">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="TryCatch_1" sap:VirtualizedContainerService.HintSize="200,51" />
      <sap2010:ViewStateData Id="AddToDictionary`2_2" sap:VirtualizedContainerService.HintSize="243,111" />
      <sap2010:ViewStateData Id="Log_19" sap:VirtualizedContainerService.HintSize="235,61" />
      <sap2010:ViewStateData Id="If_16" sap:VirtualizedContainerService.HintSize="200,51">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="GetFeatureSetExtent_1" sap:VirtualizedContainerService.HintSize="200,51" />
      <sap2010:ViewStateData Id="Log_6" sap:VirtualizedContainerService.HintSize="242,61" />
      <sap2010:ViewStateData Id="Assign_7" sap:VirtualizedContainerService.HintSize="242,60" />
      <sap2010:ViewStateData Id="Sequence_8" sap:VirtualizedContainerService.HintSize="264,285">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Log_7" sap:VirtualizedContainerService.HintSize="242,61" />
      <sap2010:ViewStateData Id="Assign_8" sap:VirtualizedContainerService.HintSize="242,60" />
      <sap2010:ViewStateData Id="Sequence_9" sap:VirtualizedContainerService.HintSize="264,285">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="If_6" sap:VirtualizedContainerService.HintSize="200,51" />
      <sap2010:ViewStateData Id="FlowStep_6">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">10,685.5</av:Point>
            <av:Size x:Key="ShapeSize">200,51</av:Size>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_7">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">10,605.5</av:Point>
            <av:Size x:Key="ShapeSize">200,51</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">110,656.5 110,685.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_14">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">0,474.5</av:Point>
            <av:Size x:Key="ShapeSize">200,51</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">100,525.5 100,555.5 110,555.5 110,605.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Log_8" sap:VirtualizedContainerService.HintSize="200,51" />
      <sap2010:ViewStateData Id="FlowStep_9">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">420,314.5</av:Point>
            <av:Size x:Key="ShapeSize">200,51</av:Size>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_6" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">270,302.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">340,346 370,346 370,340 420,340</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">270,346 100,346 100,474.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_10">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">200,205.5</av:Point>
            <av:Size x:Key="ShapeSize">200,51</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,256.5 300,286.5 305,286.5 305,302.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_11">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">520,235.5</av:Point>
            <av:Size x:Key="ShapeSize">200,51</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">520,261 490,261 490,231 400,231</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_12">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">520,134.5</av:Point>
            <av:Size x:Key="ShapeSize">200,51</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">620,185.5 620,235.5</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_13">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">200,134.5</av:Point>
            <av:Size x:Key="ShapeSize">200,51</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">400,160 520,160</av:PointCollection>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Flowchart_2" sap:VirtualizedContainerService.HintSize="823,797">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
            <av:Size x:Key="ShapeSize">60,75</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,134.5</av:PointCollection>
            <x:Double x:Key="Width">808.92776649475115</x:Double>
            <x:Double x:Key="Height">761</x:Double>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Log_17" sap:VirtualizedContainerService.HintSize="235,61" />
      <sap2010:ViewStateData Id="If_7" sap:VirtualizedContainerService.HintSize="1083,945" />
      <sap2010:ViewStateData Id="ForEach`1_3" sap:VirtualizedContainerService.HintSize="242,179">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="RunExternalCommand_1" sap:VirtualizedContainerService.HintSize="319,86" />
      <sap2010:ViewStateData Id="If_8" sap:VirtualizedContainerService.HintSize="242,74">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Log_12" sap:VirtualizedContainerService.HintSize="813,61" />
      <sap2010:ViewStateData Id="SelectFeatures_1" sap:VirtualizedContainerService.HintSize="313,229">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="SetMapExtent_2" sap:VirtualizedContainerService.HintSize="221,229">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Parallel_1" sap:VirtualizedContainerService.HintSize="688,275" />
      <sap2010:ViewStateData Id="If_14" sap:VirtualizedContainerService.HintSize="813,423" />
      <sap2010:ViewStateData Id="Sequence_10" sap:VirtualizedContainerService.HintSize="835,648">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="ForEach`1_4" sap:VirtualizedContainerService.HintSize="200,51">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_16" sap:VirtualizedContainerService.HintSize="222,175">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Alert_1" sap:VirtualizedContainerService.HintSize="212,86" />
      <sap2010:ViewStateData Id="ExitWorkflow_1" sap:VirtualizedContainerService.HintSize="212,22" />
      <sap2010:ViewStateData Id="Sequence_15" sap:VirtualizedContainerService.HintSize="234,272">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="If_15" sap:VirtualizedContainerService.HintSize="481,458">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_11" sap:VirtualizedContainerService.HintSize="503,582">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="UpdateGraphicsLayer_1" sap:VirtualizedContainerService.HintSize="296,159">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="If_10" sap:VirtualizedContainerService.HintSize="824,753">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_12" sap:VirtualizedContainerService.HintSize="846,1943">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="If_11" sap:VirtualizedContainerService.HintSize="1106,2189">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Boolean x:Key="IsAnnotationDocked">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_13" sap:VirtualizedContainerService.HintSize="222,364">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="If_12" sap:VirtualizedContainerService.HintSize="264,51">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_14" sap:VirtualizedContainerService.HintSize="286,562">
        <sap:WorkflowViewStateService.ViewState>
          <scg2:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg2:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="ActivityBuilder_1" sap:VirtualizedContainerService.HintSize="326,642" />
    </sap2010:ViewStateManager>
  </sap2010:WorkflowViewState.ViewStateManager>
</Activity>